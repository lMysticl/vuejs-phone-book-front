webpackJsonp([1],{0:function(e,t){},"25Vf":function(e,t){},"7zck":function(e,t){},Fnsd:function(e,t){},K7Es:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i=n("bOdI"),s=n.n(i),o={props:{modal:Boolean},data:function(){return{credentials:{username:"",password:""},error:!1,errorMessage:null,loading:!1}},computed:{info:function(){return this.$store.getters.infoShowed}},methods:{close:function(){this.$emit("close"),this.clearError(),this.clean()},clearError:function(){this.errorMessage=null},clearInfo:function(){this.$store.commit("setInfo",!1)},clean:function(){this.credentials.username="",this.credentials.password=""},login:function(){var e=this,t=new FormData;t.append("grant_type","password"),t.append("username",this.credentials.username),t.append("password",this.credentials.password),this.loading=!0,this.$store.dispatch("login",{credentials:this.credentials,formData:t,redirect:"test"}).then(function(){e.loading=!1,e.close(),e.clean()}).catch(function(t){e.error=!0,e.loading=!1,e.errorMessage=t.body.error_description})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Login")])]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("v-alert",{attrs:{type:"info",dismissible:"",value:e.info,transition:"scale-transition",outline:""},on:{input:e.clearInfo}},[e._v("\n        In the first request to the Heroku server, there can be delays which disappear in next request.\n      ")]),e._v(" "),n("v-alert",{attrs:{type:"error",dismissible:"",transition:"scale-transition"},on:{input:e.clearError},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v("\n        "+e._s(e.errorMessage)+"\n      ")]),e._v(" "),n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{disabled:e.loading,id:"username",label:"Username",required:"","prepend-icon":"perm_identity"},model:{value:e.credentials.username,callback:function(t){e.$set(e.credentials,"username",t)},expression:"credentials.username"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{disabled:e.loading,id:"password",label:"Password",required:"",type:"password","prepend-icon":"lock_open"},model:{value:e.credentials.password,callback:function(t){e.$set(e.credentials,"password",t)},expression:"credentials.password"}})],1)],1)],1),e._v(" "),n("small",[e._v("*indicates required field")])],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:e.loading},on:{click:e.close}},[e._v("close")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",loading:e.loading},on:{click:e.login}},[e._v("login")])],1)],1)],1)},staticRenderFns:[]},l=n("VU/8")(o,r,!1,null,null,null).exports,c={props:{modal:Boolean},data:function(){return{register:{},error:!1,errorMessage:"",e3:!0,loading:!1,password:"Password",usernameRules:[function(e){return!!e||"This field is required"},function(e){return e&&e.length>2||"This field must be more then two characters"}],passwordRules:[function(e){return!!e||"This field is required"},function(e){return e&&e.length>4||"This field must be more then 4 characters"}]}},methods:{close:function(){this.$emit("close"),this.clearError(),this.clean()},clearError:function(){this.errorMessage=null},clean:function(){this.$refs.form.reset(),this.register.username="",this.register.password="",this.register.middlename="",this.register.firstname=""},clearInfo:function(){this.$store.commit("setInfo",!1)},registration:function(){var e=this;this.$refs.form.validate()&&(this.loading=!0,this.$store.dispatch("registration",{data:this.register}).then(function(){e.loading=!1,e.close()}).catch(function(t){console.log(t),e.error=!0,e.errorMessage=t.body.message,e.loading=!1}))}},computed:{middlenameRules:function(){if(this.register.middlename)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},info:function(){return this.$store.getters.infoShowed},firstnameRules:function(){if(this.register.firstname)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},valid:{get:function(){return!!this.register.username&&!!this.register.password},set:function(e){}}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Registration")])]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",[n("v-alert",{attrs:{type:"info",dismissible:"",value:e.info,transition:"scale-transition",outline:""},on:{input:e.clearInfo}},[e._v("\n        In the first request to the Heroku server, there can be delays which disappear in next request.\n      ")]),e._v(" "),n("v-alert",{attrs:{type:"error",dismissible:"",transition:"scale-transition"},on:{input:e.clearError},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v("\n        "+e._s(e.errorMessage)+"\n      ")]),e._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{id:"reg_username",label:"Username","prepend-icon":"perm_identity",rules:e.usernameRules,disabled:e.loading,required:""},model:{value:e.register.username,callback:function(t){e.$set(e.register,"username",t)},expression:"register.username"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{id:"firstname",label:"First name","prepend-icon":"face",rules:e.firstnameRules,disabled:e.loading},model:{value:e.register.firstname,callback:function(t){e.$set(e.register,"firstname",t)},expression:"register.firstname"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{id:"middlename",label:"Middle name","prepend-icon":"person",rules:e.middlenameRules,disabled:e.loading},model:{value:e.register.middlename,callback:function(t){e.$set(e.register,"middlename",t)},expression:"register.middlename"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{staticClass:"input-group--focused",attrs:{id:"reg_password",type:"password","prepend-icon":"lock_open",name:"input-10-2",label:"Enter your password",hint:"At least 4 characters",required:"",min:"4","append-icon":e.e3?"visibility":"visibility_off","append-icon-cb":function(){return e.e3=!e.e3},type:e.e3?"password":"text",rules:e.passwordRules,disabled:e.loading},model:{value:e.register.password,callback:function(t){e.$set(e.register,"password",t)},expression:"register.password"}})],1)],1)],1),e._v(" "),n("small",[e._v("*indicates required field")])],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:e.loading},on:{click:e.close}},[e._v("close")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:!e.valid,loading:e.loading},on:{click:e.registration}},[e._v("Registration")])],1)],1)],1)},staticRenderFns:[]},u=n("VU/8")(c,d,!1,null,null,null).exports,v=s()({name:"welcome",components:{appLogin:l,appRegistration:u},data:function(){return{drawer:!1,login:!1,register:!1}},methods:{openLoginModal:function(){this.login=!0},closeRegisterModal:function(){this.register=!1},openRegisterModal:function(){this.register=!0},closeLoginModal:function(){this.login=!1},logOut:function(){this.$store.dispatch("logOut")},toTestPage:function(){this.isAuth?this.$router.push("/test"):this.openLoginModal()}},computed:{todayYear:function(){return(new Date).getFullYear()},isAuth:function(){return this.$store.getters.isAuth}}},"name","App"),m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{dark:"",src:"http://oxygennacdn3.oxygenna.com/wp-content/uploads/2015/11/18.jpg"}},[n("v-navigation-drawer",{attrs:{fixed:"",temporary:"",app:"","disable-resize-watcher":""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",[e.isAuth?e._e():n("v-list-tile",{attrs:{avatar:""},on:{click:e.openRegisterModal}},[n("v-list-tile-avatar",[n("v-icon",[e._v("fa-user-plus")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Registration")])],1)],1),e._v(" "),e.isAuth?e._e():n("v-list-tile",{attrs:{avatar:""},on:{click:e.openLoginModal}},[n("v-list-tile-avatar",[n("v-icon",[e._v("fa-sign-in")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Login")])],1)],1),e._v(" "),e.isAuth?n("v-list-tile",{attrs:{avatar:""},on:{click:e.logOut}},[n("v-list-tile-avatar",[n("v-icon",[e._v("fa-sign-out")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v("LogOut")])],1)],1):e._e(),e._v(" "),n("v-divider"),e._v(" "),n("v-list-tile",{attrs:{avatar:""},on:{click:e.toTestPage}},[n("v-list-tile-avatar",[n("v-icon",[e._v("fa-sign-out")])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v("Contacts page")])],1)],1)],1)],1),e._v(" "),n("v-toolbar",{attrs:{app:""}},[n("v-toolbar-side-icon",{staticClass:"hidden-sm-and-up",on:{click:function(t){e.drawer=!e.drawer}}}),e._v(" "),n("v-toolbar-title",{staticClass:"hidden-sm-and-up"},[e._v("Phone Book")]),e._v(" "),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[n("v-btn",{attrs:{exact:"",flat:"",to:"/"}},[e._v("\n        Phone Book\n      ")]),e._v(" "),n("v-btn",{attrs:{exact:"",flat:""},on:{click:e.toTestPage}},[e._v("\n        Contacts Page\n      ")])],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[e.isAuth?e._e():n("v-btn",{attrs:{flat:""},on:{click:e.openRegisterModal}},[n("v-icon",{attrs:{left:""}},[e._v("fa-user-plus")]),e._v("\n        Registration\n      ")],1),e._v(" "),e.isAuth?e._e():n("v-btn",{attrs:{flat:""},on:{click:e.openLoginModal}},[n("v-icon",{attrs:{left:""}},[e._v("fa-sign-in")]),e._v("\n        Login\n      ")],1),e._v(" "),e.isAuth?n("v-btn",{attrs:{flat:""},on:{click:e.logOut}},[n("v-icon",{attrs:{left:""}},[e._v("fa-sign-out")]),e._v("\n        LogOut\n      ")],1):e._e()],1)],1),e._v(" "),n("v-content",[n("router-view")],1),e._v(" "),n("app-login",{attrs:{modal:e.login},on:{close:e.closeLoginModal}}),e._v(" "),n("app-registration",{attrs:{modal:e.register},on:{close:e.closeRegisterModal}}),e._v(" "),n("v-footer",{attrs:{app:""}},[n("span",{staticClass:"pl-4"},[e._v("© dantedimon and mystic | "+e._s(e.todayYear)+" | © ")])])],1)},staticRenderFns:[]};var h=n("VU/8")(v,m,!1,function(e){n("K7Es")},null,null).exports,f=n("/ocq");function p(e){return function(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}(e).exp}function g(){return localStorage.getItem("access_token")}var _={getToken:g,saveToken:function(e){localStorage.setItem("access_token",e)},deleteToken:function(){localStorage.removeItem("access_token")},getAuthHeader:function(){return"Bearer "+g()},isTokenExpired:function(){var e=g();return!e||Date.now()/1e3>p(e)}},b=n("fZjL"),x=n.n(b),k={props:["contact"],data:function(){return{modal:!1,loading:!1,contactId:null,firstname:null,middlename:null,lastname:null,address:null,email:null,homePhone:null,mobilePhone:null,firstnameRules:[function(e){return!!e||"This field is required"},function(e){return e&&e.length>2||"This field must be more then two characters"}],mobilePhoneRules:[function(e){return!!e||"This field is required"},function(e){return e&&e.length>2||"This field must be more then two characters"}]}},computed:{lastnameRules:function(){if(this.lastname)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},middlenameRules:function(){if(this.middlename)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},homePhoneRules:function(){if(this.homePhone)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},addressRules:function(){if(this.address)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},emailRules:function(){if(this.email)return[function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}]},update:function(){return this.contact.firstname!==this.firstname||this.contact.middlename!==this.middlename||this.contact.lastname!==this.lastname||this.contact.address!==this.address||this.contact.email!==this.email||this.contact.homePhone!==this.homePhone||this.contact.mobilePhone!==this.mobilePhone},valid:{get:function(){return!!this.firstname&&!!this.mobilePhone},set:function(e){}}},methods:{setValues:function(){this.contactId=this.contact.contactId,this.firstname=this.contact.firstname,this.middlename=this.contact.middlename,this.lastname=this.contact.lastname,this.address=this.contact.address,this.email=this.contact.email,this.homePhone=this.contact.homePhone,this.mobilePhone=this.contact.mobilePhone},close:function(){this.modal=!1,this.clean()},clean:function(){this.$refs.form.reset(),this.firstname="",this.lastname="",this.middlename="",this.address="",this.email="",this.homePhone="",this.mobilePhone=""},open:function(){this.modal=!0},save:function(){var e=this;if(this.$refs.form.validate()){var t=new FormData;t.append("contactId",this.contactId),t.append("firstname",this.firstname),t.append("lastname",this.lastname),t.append("middlename",this.middlename),t.append("address",this.address),t.append("email",this.email),t.append("homePhone",this.homePhone),t.append("mobilePhone",this.mobilePhone),this.loading=!0,this.$http.post("https://vuejs-phone-book.herokuapp.com/contacts/update",t,{headers:{Authorization:_.getAuthHeader()}}).then(function(){e.loading=!1,e.close(),e.$emit("update"),e.clean()}).catch(function(t){e.loading=!1})}}},watch:{contact:function(e){x()(e).length&&(this.open(),this.setValues())}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"450px"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Contact data")])]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticStyle:{"max-height":"400px"}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"First name",rules:e.firstnameRules,disabled:e.loading},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Last name",rules:e.lastnameRules,disabled:e.loading},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Middle name",rules:e.middlenameRules,disabled:e.loading},model:{value:e.middlename,callback:function(t){e.middlename=t},expression:"middlename"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Mobile phone",rules:e.mobilePhoneRules,disabled:e.loading,type:"number"},model:{value:e.mobilePhone,callback:function(t){e.mobilePhone=t},expression:"mobilePhone"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Home phone",rules:e.homePhoneRules,disabled:e.loading,type:"number"},model:{value:e.homePhone,callback:function(t){e.homePhone=t},expression:"homePhone"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Address",disabled:e.loading,rules:e.addressRules},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Email",disabled:e.loading,rules:e.emailRules,type:"email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1)],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:e.loading},nativeOn:{click:function(t){e.close(t)}}},[e._v("Close")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:!e.valid&&e.update,loading:e.loading},nativeOn:{click:function(t){e.save(t)}}},[e._v("Save")])],1)],1)],1)},staticRenderFns:[]};var P={data:function(){return{modal:!1,firstname:"",middlename:"",lastname:"",address:"",email:"",homePhone:"",mobilePhone:"",loading:!1,error:!1,errorMessage:null,firstnameRules:[function(e){return!!e||"This field is required"},function(e){return e&&e.length>2||"This field must be more then two characters"}],mobilePhoneRules:[function(e){return!!e||"This field is required"},function(e){return e&&e.length>2||"This field must be more then two characters"}]}},computed:{lastnameRules:function(){if(this.lastname)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},middlenameRules:function(){if(this.middlename)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},homePhoneRules:function(){if(this.homePhone)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},addressRules:function(){if(this.address)return[function(e){return e&&e.length>2||"This field must be more then two characters"}]},emailRules:function(){if(this.email)return[function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}]},valid:{get:function(){return!!this.firstname&&!!this.mobilePhone},set:function(e){}}},methods:{close:function(){this.modal=!1,this.clean()},clean:function(){this.$refs.form.reset(),this.firstname="",this.lastname="",this.middlename="",this.address="",this.email="",this.homePhone="",this.mobilePhone=""},open:function(){this.modal=!0},save:function(){var e=this;if(this.$refs.form.validate()){var t=new FormData;t.append("firstname",this.firstname),t.append("lastname",this.lastname),t.append("middlename",this.middlename),t.append("address",this.address),t.append("email",this.email),t.append("homePhone",this.homePhone),t.append("mobilePhone",this.mobilePhone),this.loading=!0,this.$http.post("https://vuejs-phone-book.herokuapp.com/contacts/add",t,{headers:{Authorization:_.getAuthHeader()}}).then(function(){e.loading=!1,e.close(),e.$emit("update"),e.clean()}).catch(function(t){e.loading=!1})}}}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"450px"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[n("v-btn",{attrs:{slot:"activator",color:"blue",dark:""},slot:"activator"},[e._v("new contact")]),e._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("Contact data")])]),e._v(" "),n("div",{staticClass:"pl-4 pb-2"},[n("small",[e._v("* - required fields")])]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-text",{staticStyle:{"max-height":"400px"}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"First name",rules:e.firstnameRules,disabled:e.loading,required:""},model:{value:e.firstname,callback:function(t){e.firstname=t},expression:"firstname"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Last name",rules:e.lastnameRules,disabled:e.loading},model:{value:e.lastname,callback:function(t){e.lastname=t},expression:"lastname"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Middle name",rules:e.middlenameRules,disabled:e.loading},model:{value:e.middlename,callback:function(t){e.middlename=t},expression:"middlename"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Mobile phone",rules:e.mobilePhoneRules,type:"number",disabled:e.loading,required:""},model:{value:e.mobilePhone,callback:function(t){e.mobilePhone=t},expression:"mobilePhone"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Home phone",rules:e.homePhoneRules,type:"number",disabled:e.loading},model:{value:e.homePhone,callback:function(t){e.homePhone=t},expression:"homePhone"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Address",rules:e.addressRules,disabled:e.loading},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Email",type:"email",rules:e.emailRules,disabled:e.loading},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)],1)],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:e.loading},nativeOn:{click:function(t){e.close(t)}}},[e._v("Close")]),e._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:!e.valid,loading:e.loading},nativeOn:{click:function(t){e.save(t)}}},[e._v("Save")])],1)],1)],1)},staticRenderFns:[]};var C="https://vuejs-phone-book.herokuapp.com/",R={components:{contactEdit:n("VU/8")(k,w,!1,function(e){n("25Vf")},"data-v-bff83008",null).exports,contactAdd:n("VU/8")(P,y,!1,function(e){n("vRJh")},"data-v-9b87f0bc",null).exports},data:function(){return{contact:{},loading:!1,deleting:!1,selected:[],search:null,rowsPerPageItems:[4,8,12],checkboxes:{},pagination:{rowsPerPage:10},headers:[{text:"ID",align:"left",value:"contactId"},{text:"First Name",value:"firstname"},{text:"Last Name",value:"lastname"},{text:"Middle Name",value:"middlename"},{text:"Mobile Name",value:"mobilePhone"},{text:"Home phone",value:"homePhone"},{text:"Address",value:"address"},{text:"Email",value:"email"},{text:"Actions",value:"name",sortable:!1}],contacts:[]}},created:function(){this.loadContactList()},methods:{updateSelection:function(){var e=this;this.selected=[];var t=function(t){if(e.checkboxes[t]){var n=e.contacts.find(function(e){return e.contactId==t});console.log(n),e.selected.push(n)}};for(var n in this.checkboxes)t(n)},loadContactList:function(){var e=this;this.loading=!0,this.$http.get(C+"contacts/get-all",{headers:{Authorization:_.getAuthHeader()}}).then(function(t){e.contacts=t.body,e.loading=!1})},selectContact:function(e){this.contact=this.contacts.find(function(t){return t.contactId===e})},deleteContact:function(e){var t=this,n=new FormData;n.append("contactId",e),this.$http.post(C+"contacts/delete",n,{headers:{Authorization:_.getAuthHeader()}}).then(function(){t.selected=[],t.loadContactList()})},deleteSelectedContacts:function(){var e=this,t=new FormData;this.deleting=!0;var n=this.selected.map(function(e){return e.contactId});console.log(n),t.append("contactId",n),this.$http.post(C+"contacts/deleteList",t,{headers:{Authorization:_.getAuthHeader()}}).then(function(){e.selected=[],e.checkboxes={},e.loadContactList(),e.deleting=!1}).catch(function(t){e.deleting=!1})}},computed:{isMobile:function(){return this.$vuetify.breakpoint.mdAndDown},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.contacts.length/this.pagination.rowsPerPage)}},watch:{isMobile:function(e){this.selected=[],this.checkboxes={}}}},A={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{staticClass:"pt-5",staticStyle:{"max-width":"1250px"}},[n("v-card",[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-text-field",{attrs:{box:"",label:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("contact-add",{on:{update:e.loadContactList}}),e._v(" "),e.selected.length?n("v-btn",{attrs:{loading:e.deleting,color:"red",dark:""},on:{click:e.deleteSelectedContacts}},[e._v("Delete selected")]):e._e()],1)],1)],1),e._v(" "),n("v-divider"),e._v(" "),e.isMobile?e._e():n("v-data-table",{attrs:{loading:e.loading,headers:e.headers,items:e.contacts,search:e.search,"select-all":"","item-key":"contactId",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("tr",[n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(n){e.$set(t,"selected",n)},expression:"props.selected"}})],1),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.contactId||"-"))]),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.firstname||"-"))]),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.lastname||"-"))]),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.middlename||"-"))]),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.mobilePhone||"-"))]),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.homePhone||"-"))]),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.address||"-"))]),e._v(" "),n("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.email||"-"))]),e._v(" "),n("td",{staticClass:"justify-center layout px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){e.selectContact(t.item.contactId)}}},[n("v-icon",{attrs:{color:"teal"}},[e._v("edit")])],1),e._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){e.deleteContact(t.item.contactId)}}},[n("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1)],1)])]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),e.isMobile?n("v-container",{attrs:{fluid:"","grid-list-lg":""}},[e.loading?e._e():n("v-data-iterator",{attrs:{"content-tag":"v-layout",row:"",wrap:"",search:e.search,items:e.contacts,"rows-per-page-items":e.rowsPerPageItems,pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"item",fn:function(t){return n("v-flex",{attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[n("v-card",[n("v-list",{attrs:{dense:""}},[n("v-list-tile",[n("v-list-tile-content",[e._v("Contact ID:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.contactId||"-"))])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[e._v("First name:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.firstname||"-"))])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[e._v("Last name:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.lastname||"-"))])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[e._v("Middle name:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.middlename||"-"))])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[e._v("Mobile phone:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.mobilePhone||"-"))])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[e._v("Home phone:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.homePhone||"-"))])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[e._v("Address:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.address||"-"))])],1),e._v(" "),n("v-list-tile",[n("v-list-tile-content",[e._v("Email:")]),e._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[e._v(e._s(t.item.email||"-"))])],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",{attrs:{"align-center":""}},[n("v-checkbox",{attrs:{"hide-details":""},on:{change:e.updateSelection},model:{value:e.checkboxes[t.item.contactId],callback:function(n){e.$set(e.checkboxes,t.item.contactId,n)},expression:"checkboxes[props.item.contactId]"}}),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{disabled:e.deleting,icon:""},on:{click:function(n){e.selectContact(t.item.contactId)}}},[n("v-icon",{attrs:{color:"teal"}},[e._v("edit")])],1),e._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{disabled:e.deleting,icon:""},on:{click:function(n){e.deleteContact(t.item.contactId)}}},[n("v-icon",{attrs:{color:"pink"}},[e._v("delete")])],1)],1)],1)],1)}}])}),e._v(" "),e.loading?n("v-layout",{staticClass:"pa-2",attrs:{"align-center":"","justify-center":""}},[n("v-progress-circular",{attrs:{size:50,indeterminate:"",color:"primary"}})],1):e._e()],1):e._e()],1),e._v(" "),n("contact-edit",{attrs:{contact:e.contact},on:{update:e.loadContactList}})],1)],1)],1)},staticRenderFns:[]};var $=n("VU/8")(R,A,!1,function(e){n("Fnsd")},null,null).exports,I={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{staticStyle:{"max-width":"1150px"}},[n("v-jumbotron",{attrs:{height:"500px"}},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",[n("h3",{staticClass:"display-3"},[e._v("Welcome to the Phone Book app")]),e._v(" "),n("span",{staticClass:"subheading"},[e._v("Lorem ipsum dolor sit amet, pri veniam forensibus id. Vis maluisset molestiae id, ad semper lobortis cum. At impetus detraxit incorrupte usu, repudiare assueverit ex eum, ne nam essent vocent admodum.")]),e._v(" "),n("v-divider",{staticClass:"my-3"}),e._v(" "),n("div",{staticClass:"title mb-3"},[e._v("Check out our newest revolutionary features!")]),e._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{large:"",color:"primary"}},[e._v("See more")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var M=n("VU/8")({name:"welcome"},I,!1,function(e){n("ZaRi")},"data-v-7aa0df31",null).exports,T=n("woOf"),E=n.n(T),L=n("NYxO");a.a.use(L.a);var S=new L.a.Store({state:{user:{},info:!0,redirect:null,isAuth:!1},getters:{user:function(e){return e.user},infoShowed:function(e){return e.info},isAuth:function(e){return e.isAuth},redirect:function(e){return e.redirect}},mutations:{setUser:function(e,t){return e.user=E()({},t)},setRedirect:function(e,t){e.redirect=t},setAuth:function(e,t){e.isAuth=t},setInfo:function(e,t){e.info=t}},actions:{login:function(e,t){var n,i=e.commit,s=(t.credentials,t.formData),o=t.redirect;return a.a.http.post("https://vuejs-phone-book.herokuapp.com/oauth/token",s,{headers:{authorization:"Basic "+(n="testjwtclientid:XY7kmzoNzl100",btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)})))}}).then(function(e){var t=e.body.access_token;return _.saveToken(t),i("setAuth",!0),o&&F.push(o),!0})},registration:function(e,t){e.commit,t.credentials;var n=t.data,i=t.redirect;return a.a.http.post("https://vuejs-phone-book.herokuapp.com/api/register",n).then(function(e){return i&&F.push(i),!0})},logOut:function(e){var t=e.commit;_.deleteToken(),t("setAuth",!1),F.push("/")}}});a.a.use(f.a);var q=new f.a({mode:"history",routes:[{path:"/",component:M},{path:"/test",component:$,meta:{requireAuth:!0}}]});q.beforeEach(function(e,t,n){var a=e.matched.some(function(e){return e.meta.requireAuth});S.getters.isAuth;_.isTokenExpired()?(_.deleteToken(),S.commit("setAuth",!1)):(S.commit("setAuth",!0),n()),!S.getters.isAuth&&a?n("/"):n()});var F=q,O=n("3EgV"),z=n.n(O),j=n("8+8L");n("7zck");a.a.use(z.a),a.a.use(j.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:F,store:S,components:{App:h},template:"<App/>"})},ZaRi:function(e,t){},vRJh:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f038400346dbcd1c59dc.js.map