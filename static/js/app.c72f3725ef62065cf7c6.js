webpackJsonp([1],{"/Lp/":function(t,e){},0:function(t,e){},"7zck":function(t,e){},FIzm:function(t,e){},"FnG/":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s=n("bOdI"),i=n.n(s),r={props:{modal:Boolean},data:function(){return{credentials:{username:"",password:""},error:!1,errorMessage:null,loading:!1}},computed:{info:function(){return this.$store.getters.infoShowed}},methods:{close:function(){this.$emit("close"),this.clearError(),this.clean()},clearError:function(){this.errorMessage=null},clearInfo:function(){this.$store.commit("setInfo",!1)},clean:function(){this.credentials.username="",this.credentials.password=""},login:function(){var t=this,e=new FormData;e.append("grant_type","password"),e.append("username",this.credentials.username),e.append("password",this.credentials.password),this.loading=!0,this.$store.dispatch("login",{credentials:this.credentials,formData:e,redirect:"contacts"}).then(function(){t.loading=!1,t.close(),t.clean()}).catch(function(e){t.error=!0,t.loading=!1,t.errorMessage=e.body.error_description})}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Login")])]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("v-alert",{attrs:{type:"info",dismissible:"",value:t.info,transition:"scale-transition",outline:""},on:{input:t.clearInfo}},[t._v("\n        In the first request to the Heroku server, there can be delays. Which disappear in next request.\n      ")]),t._v(" "),n("v-alert",{attrs:{type:"error",dismissible:"",transition:"scale-transition"},on:{input:t.clearError},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]),t._v(" "),n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{disabled:t.loading,id:"username",label:"Username",required:"","prepend-icon":"perm_identity"},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{disabled:t.loading,id:"password",label:"Password",required:"",type:"password","prepend-icon":"lock_open"},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}})],1)],1)],1),t._v(" "),n("small",[t._v("*indicates required field")])],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:t.loading},on:{click:t.close}},[t._v("close")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",loading:t.loading},on:{click:t.login}},[t._v("login")])],1)],1)],1)},staticRenderFns:[]},l=n("VU/8")(r,o,!1,null,null,null).exports,c=/^[a-zA-Z\\s]*$/,d=/^[a-zA-Z0-9]*$/,u={props:{modal:Boolean},data:function(){return{register:{},error:!1,errorMessage:"",e3:!0,loading:!1,password:"Password",usernameRules:[function(t){return!!t||"This field is required"},function(t){return t&&t.length>2&&d.test(t)||"This field must be more then two characters "}],passwordRules:[function(t){return!!t||"This field is required"},function(t){return t&&t.length>4||"This field must be more then 4 characters"}]}},methods:{close:function(){this.$emit("close"),this.clearError(),this.clean()},clearError:function(){this.errorMessage=null},clean:function(){this.$refs.form.reset(),this.register.username="",this.register.password="",this.register.firstname=""},clearInfo:function(){this.$store.commit("setInfo",!1)},registration:function(){var t=this;this.$refs.form.validate()&&(this.loading=!0,this.$store.dispatch("registration",{data:this.register}).then(function(){t.loading=!1,t.close()}).catch(function(e){t.error=!0,t.errorMessage=e.body.message,t.loading=!1}))}},computed:{info:function(){return this.$store.getters.infoShowed},firstnameRules:function(){if(this.register.firstname)return[function(t){return t&&t.length>2&&c.test(t)||"This field must be more then two characters and only letters"}]},valid:{get:function(){return!!this.register.username&&!!this.register.password},set:function(t){}}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Registration")])]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("v-alert",{attrs:{type:"info",dismissible:"",value:t.info,transition:"scale-transition",outline:""},on:{input:t.clearInfo}},[t._v("\n        In the first request to the Heroku server, there can be delays which disappear in next request.\n      ")]),t._v(" "),n("v-alert",{attrs:{type:"error",dismissible:"",transition:"scale-transition"},on:{input:t.clearError},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]),t._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{id:"reg_username",label:"Username","prepend-icon":"perm_identity",rules:t.usernameRules,disabled:t.loading,required:""},model:{value:t.register.username,callback:function(e){t.$set(t.register,"username",e)},expression:"register.username"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{id:"firstname",label:"First name","prepend-icon":"face",rules:t.firstnameRules,disabled:t.loading},model:{value:t.register.firstname,callback:function(e){t.$set(t.register,"firstname",e)},expression:"register.firstname"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{staticClass:"input-group--focused",attrs:{id:"reg_password",type:"password","prepend-icon":"lock_open",name:"input-10-2",label:"Enter your password",hint:"At least 5 characters",required:"",min:"4","append-icon":t.e3?"visibility":"visibility_off","append-icon-cb":function(){return t.e3=!t.e3},type:t.e3?"password":"text",rules:t.passwordRules,disabled:t.loading},model:{value:t.register.password,callback:function(e){t.$set(t.register,"password",e)},expression:"register.password"}})],1)],1)],1),t._v(" "),n("small",[t._v("*indicates required field")])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:t.loading},on:{click:t.close}},[t._v("close")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:!t.valid,loading:t.loading},on:{click:t.registration}},[t._v("Registration")])],1)],1)],1)},staticRenderFns:[]},h=n("VU/8")(u,v,!1,null,null,null).exports,m=i()({name:"welcome",components:{appLogin:l,appRegistration:h},data:function(){return{drawer:!1,login:!1,register:!1}},methods:{openLoginModal:function(){this.login=!0},closeRegisterModal:function(){this.register=!1},openRegisterModal:function(){this.register=!0},closeLoginModal:function(){this.login=!1},logOut:function(){this.$store.dispatch("logOut")},toTestPage:function(){this.isAuth?this.$router.push("/contacts"):this.openLoginModal()}},computed:{todayYear:function(){return(new Date).getFullYear()},isAuth:function(){return this.$store.getters.isAuth}}},"name","App"),f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:"",src:"http://oxygennacdn3.oxygenna.com/wp-content/uploads/2015/11/18.jpg"}},[n("v-navigation-drawer",{attrs:{fixed:"",temporary:"",app:"","disable-resize-watcher":""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("v-list",[t.isAuth?t._e():n("v-list-tile",{attrs:{avatar:""},on:{click:t.openRegisterModal}},[n("v-list-tile-avatar",[n("v-icon",[t._v("fa-user-plus")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("Registration")])],1)],1),t._v(" "),t.isAuth?t._e():n("v-list-tile",{attrs:{avatar:""},on:{click:t.openLoginModal}},[n("v-list-tile-avatar",[n("v-icon",[t._v("fa-sign-in")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("Login")])],1)],1),t._v(" "),t.isAuth?n("v-list-tile",{attrs:{avatar:""},on:{click:t.logOut}},[n("v-list-tile-avatar",[n("v-icon",[t._v("fa-sign-out")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("LogOut")])],1)],1):t._e(),t._v(" "),n("v-divider"),t._v(" "),n("v-list-tile",{attrs:{avatar:""},on:{click:t.toTestPage}},[n("v-list-tile-avatar",[n("v-icon",[t._v("fa-sign-out")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("Contacts page")])],1)],1)],1)],1),t._v(" "),n("v-toolbar",{attrs:{app:""}},[n("v-toolbar-side-icon",{staticClass:"hidden-sm-and-up",on:{click:function(e){t.drawer=!t.drawer}}}),t._v(" "),n("v-toolbar-title",{staticClass:"hidden-sm-and-up"},[t._v("Phone Book")]),t._v(" "),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[n("v-btn",{attrs:{exact:"",flat:"",to:"/"}},[t._v("\n        Phone Book\n      ")]),t._v(" "),n("v-btn",{attrs:{exact:"",flat:""},on:{click:t.toTestPage}},[t._v("\n        Contacts Page\n      ")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[t.isAuth?t._e():n("v-btn",{attrs:{flat:""},on:{click:t.openRegisterModal}},[n("v-icon",{attrs:{left:""}},[t._v("fa-user-plus")]),t._v("\n        Registration\n      ")],1),t._v(" "),t.isAuth?t._e():n("v-btn",{attrs:{flat:""},on:{click:t.openLoginModal}},[n("v-icon",{attrs:{left:""}},[t._v("fa-sign-in")]),t._v("\n        Login\n      ")],1),t._v(" "),t.isAuth?n("v-btn",{attrs:{flat:""},on:{click:t.logOut}},[n("v-icon",{attrs:{left:""}},[t._v("fa-sign-out")]),t._v("\n        LogOut\n      ")],1):t._e()],1)],1),t._v(" "),n("v-content",[n("router-view")],1),t._v(" "),n("app-login",{attrs:{modal:t.login},on:{close:t.closeLoginModal}}),t._v(" "),n("app-registration",{attrs:{modal:t.register},on:{close:t.closeRegisterModal}}),t._v(" "),n("v-footer",{attrs:{app:""}},[n("span",{staticClass:"pl-4"},[t._v("© dantedimon and mystic | "+t._s(t.todayYear)+" | © ")])])],1)},staticRenderFns:[]};var p=n("VU/8")(m,f,!1,function(t){n("FIzm")},null,null).exports,g=n("/ocq");function _(t){return function(t){var e=t.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(e))}(t).exp}function b(){return localStorage.getItem("access_token")}var x={getToken:b,saveToken:function(t){localStorage.setItem("access_token",t)},deleteToken:function(){localStorage.removeItem("access_token")},getAuthHeader:function(){return"Bearer "+b()},isTokenExpired:function(){var t=b();return!t||Date.now()/1e3>_(t)}},k=n("fZjL"),w=n.n(k),y={Australia:"+61-#-####-####",Germany:"+49(####)###-####",Spain:"+34(###)###-###",Finland:"+358(###)###-##-##",France:"+33(###)###-###",Greece:"+30(###)###-####",Croatia:"+385-##-###-###",Hungary:"+36(###)###-###",Israel:"+972-#-###-####",Italy:"+39(###)####-###",Luxembourg:"+352(###)###-###",Latvia:"+371-##-###-###",Malta:"+356-####-####",Russia:"+7(###)###-##-##",Sweden:"+46-##-###-####",Ukraine:"+380(##)###-##-##","USA and Canada":"+1(###)###-####"},C=/^[a-zA-Z\\s]*$/,A=/[A-Za-z0-9'\.\-\s\,]/,P=/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/,$=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,M={props:["contact"],data:function(){return{modal:!1,country:"",phoneMasks:y,loading:!1,contactId:"",firstname:"",lastname:"",address:"",email:"",error:!1,errorMessage:"",mobilePhone:"",firstnameRules:[function(t){return!!t||"This field is required"},function(t){return t&&t.length>2&&C.test(t)||"This field must be more then two characters and only letters"}],mobilePhoneRules:[function(t){return!!t||"This field is required"},function(t){return t&&t.length>8&&P.test(t)||"This field must be more eight two numbers and only numbers"}]}},computed:{countries:function(){var t=[];for(var e in this.phoneMasks)t.push(e);return t},lastnameRules:function(){if(this.lastname)return[function(t){return t&&t.length>2&&C.test(t)||"This field must be more then two characters and only letters"}]},addressRules:function(){if(this.address)return[function(t){return t&&t.length>2&&A.test(t)||"This field must be more then two characters"}]},emailRules:function(){if(this.email)return[function(t){return $.test(t)||"E-mail must be valid"}]},update:function(){return this.contact.firstname!==this.firstname||this.contact.lastname!==this.lastname||this.contact.address!==this.address||this.contact.email!==this.email||this.contact.mobilePhone!==this.mobilePhone},valid:{get:function(){return!!this.firstname&&!!this.mobilePhone},set:function(t){}}},methods:{updateMask:function(){var t=this;this.country&&setTimeout(function(){t.mobilePhone=t.phoneMasks[t.country].replace(/#/g,"")},50)},clearError:function(){this.errorMessage=null},setValues:function(){this.contactId=this.contact.contactId,this.firstname=this.contact.firstname,this.lastname=this.contact.lastname,this.country=this.contact.country,this.address=this.contact.address,this.email=this.contact.email,this.mobilePhone=this.contact.mobilePhone,this.$refs.mobilePhone.focus(),this.$refs.mobilePhone.blur()},close:function(){this.modal=!1,this.clean(),this.clearError(),this.$emit("close")},clean:function(){this.$refs.form.reset(),this.firstname="",this.lastname="",this.country="",this.address="",this.email="",this.mobilePhone=""},open:function(){this.modal=!0},save:function(){var t=this;if(this.$refs.form.validate()){var e=new FormData;e.append("contactId",this.contactId),e.append("firstname",this.firstname),e.append("lastname",this.lastname),e.append("country",this.country),e.append("address",this.address),e.append("email",this.email),e.append("mobilePhone",this.mobilePhone),this.loading=!0,this.$http.post("https://vuejs-phone-book.herokuapp.com/contacts/update",e,{headers:{Authorization:x.getAuthHeader()}}).then(function(){t.loading=!1,t.close(),t.$emit("update"),t.clean()}).catch(function(e){t.loading=!1,t.errorMessage=e.body.message})}}},watch:{contact:function(t){w()(t).length&&(this.open(),this.setValues())}}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"450px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Contact data")])]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("v-alert",{attrs:{type:"error",dismissible:"",transition:"scale-transition"},on:{input:t.clearError},model:{value:t.error,callback:function(e){t.error=e},expression:"error"}},[t._v("\n        "+t._s(t.errorMessage)+"\n      ")]),t._v(" "),n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"First name",rules:t.firstnameRules,disabled:t.loading},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Last name",rules:t.lastnameRules,disabled:t.loading},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1),t._v(" "),n("v-select",{attrs:{label:"Country",items:t.countries},on:{input:t.updateMask},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}}),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{ref:"mobilePhone",attrs:{label:"Mobile phone",rules:t.mobilePhoneRules,disabled:t.loading,"return-masked-value":"",mask:t.phoneMasks[t.country],hint:t.phoneMasks[t.country],type:"tel"},model:{value:t.mobilePhone,callback:function(e){t.mobilePhone=e},expression:"mobilePhone"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Address",disabled:t.loading,rules:t.addressRules},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Email",disabled:t.loading,rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1)],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:t.loading},nativeOn:{click:function(e){t.close(e)}}},[t._v("Close")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:!t.valid||!t.update,loading:t.loading},nativeOn:{click:function(e){t.save(e)}}},[t._v("Save\n      ")])],1)],1)],1)},staticRenderFns:[]};var I=/^[a-zA-Z\\s]*$/,T=/[A-Za-z0-9'\.\-\s\,]/,E=/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/,L=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,S={data:function(){return{modal:!1,firstname:"",lastname:"",address:"",phoneMasks:y,email:"",country:"Australia",mobilePhone:"",loading:!1,firstnameRules:[function(t){return!!t||"This field is required"},function(t){return t&&t.length>2&&I.test(t)||"This field must be more then two characters and only letters"}],mobilePhoneRules:[function(t){return!!t||"This field is required"},function(t){return t&&t.length>8&&E.test(t)||"This field must be more then eight numbers"}]}},computed:{countries:function(){var t=[];for(var e in this.phoneMasks)t.push(e);return t},lastnameRules:function(){if(this.lastname)return[function(t){return t&&t.length>2&&I.test(t)||"This field must be more then two characters and only letters"}]},addressRules:function(){if(this.address)return[function(t){return t&&t.length>2&&T.test(t)||"This field must be more then two characters"}]},emailRules:function(){if(this.email)return[function(t){return L.test(t)||"E-mail must be valid"}]},valid:{get:function(){return!!this.firstname&&!!this.mobilePhone},set:function(t){}}},methods:{updateMask:function(){var t=this;this.country&&setTimeout(function(){t.mobilePhone=t.phoneMasks[t.country].replace(/#/g,"")},50)},close:function(){this.modal=!1,this.clean()},clean:function(){this.$refs.form.reset(),this.firstname="",this.lastname="",this.address="",this.country="",this.email="",this.mobilePhone=""},open:function(){this.modal=!0},save:function(){var t=this;if(this.$refs.form.validate()){var e=new FormData;e.append("firstname",this.firstname),e.append("lastname",this.lastname),e.append("country",this.country),e.append("address",this.address),e.append("email",this.email),e.append("mobilePhone",this.mobilePhone),this.loading=!0,this.$http.post("https://vuejs-phone-book.herokuapp.com/contacts/add",e,{headers:{Authorization:x.getAuthHeader()}}).then(function(){t.loading=!1,t.close(),t.$emit("update"),t.clean()}).catch(function(e){t.loading=!1})}}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{persistent:"",scrollable:"","max-width":"450px"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[n("v-btn",{attrs:{slot:"activator",color:"blue",dark:""},slot:"activator"},[t._v("new contact")]),t._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Contact data")])]),t._v(" "),n("div",{staticClass:"pl-4 pb-2"},[n("small",[t._v("* - required fields")])]),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"First name",rules:t.firstnameRules,disabled:t.loading,required:""},model:{value:t.firstname,callback:function(e){t.firstname=e},expression:"firstname"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Last name",rules:t.lastnameRules,disabled:t.loading},model:{value:t.lastname,callback:function(e){t.lastname=e},expression:"lastname"}})],1),t._v(" "),n("v-select",{attrs:{label:"Country",items:t.countries},on:{change:t.updateMask},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}}),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Mobile phone",rules:t.mobilePhoneRules,type:"tel",disabled:t.loading,required:"","return-masked-value":"",mask:t.phoneMasks[t.country],hint:t.phoneMasks[t.country]},model:{value:t.mobilePhone,callback:function(e){t.mobilePhone=e},expression:"mobilePhone"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Address",rules:t.addressRules,disabled:t.loading},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{label:"Email",rules:t.emailRules,disabled:t.loading},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1)],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:t.loading},nativeOn:{click:function(e){t.close(e)}}},[t._v("Close")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:"",disabled:!t.valid,loading:t.loading},nativeOn:{click:function(e){t.save(e)}}},[t._v("Save")])],1)],1)],1)},staticRenderFns:[]};var F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.show?t._t("default"):t._e(),t._v(" "),n("div",[n("v-btn",{attrs:{block:"",color:"grey darken-2"},on:{click:function(e){t.show=!t.show}}},[t._v(t._s(t.show?"hide":"show"))])],1)],2)},staticRenderFns:[]};var q="https://vuejs-phone-book.herokuapp.com/",O={components:{contactEdit:n("VU/8")(M,R,!1,function(t){n("/Lp/")},"data-v-e249c4b2",null).exports,contactAdd:n("VU/8")(S,z,!1,function(t){n("gKz6")},"data-v-3521c3aa",null).exports,expantionPanel:n("VU/8")({data:function(){return{show:!1}}},F,!1,function(t){n("qSSP")},"data-v-5552b388",null).exports},data:function(){return{contact:{},loading:!1,deleting:!1,selected:[],search:null,rowsPerPageItems:[4,8,12],checkboxes:{},pagination:{rowsPerPage:10},headers:[{text:"ID",align:"right",value:"contactId"},{text:"First Name",align:"right",value:"firstname"},{text:"Last Name",align:"right",value:"lastname"},{text:"Country",align:"right",value:"country"},{text:"Mobile Phone",align:"right",value:"mobilePhone"},{text:"Address",align:"right",value:"address"},{text:"Email",align:"right",value:"email"},{text:"Actions",align:"right",value:"name",sortable:!1}],contacts:[]}},created:function(){this.loadContactList()},methods:{clearContact:function(){this.contact={}},updateSelection:function(){var t=this;this.selected=[];var e=function(e){if(t.checkboxes[e]){var n=t.contacts.find(function(t){return t.contactId==e});console.log(n),t.selected.push(n)}};for(var n in this.checkboxes)e(n)},loadContactList:function(){var t=this;this.loading=!0,this.$http.get(q+"contacts/get-all",{headers:{Authorization:x.getAuthHeader()}}).then(function(e){t.contacts=e.body,t.loading=!1})},selectContact:function(t){this.contact=this.contacts.find(function(e){return e.contactId===t})},deleteContact:function(t){var e=this,n=new FormData;n.append("contactId",t),this.$http.post(q+"contacts/delete",n,{headers:{Authorization:x.getAuthHeader()}}).then(function(){e.selected=[],e.loadContactList()})},deleteSelectedContacts:function(){var t=this,e=new FormData;this.deleting=!0;var n=this.selected.map(function(t){return t.contactId});console.log(n),e.append("contactId",n),this.$http.post(q+"contacts/deleteList",e,{headers:{Authorization:x.getAuthHeader()}}).then(function(){t.selected=[],t.checkboxes={},t.loadContactList(),t.deleting=!1}).catch(function(e){t.deleting=!1})}},computed:{isMobile:function(){return this.$vuetify.breakpoint.mdAndDown},pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.contacts.length/this.pagination.rowsPerPage)}},watch:{isMobile:function(t){this.selected=[],this.checkboxes={}}}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{staticClass:"pt-5",staticStyle:{"max-width":"1250px"}},[n("v-card",[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{xs12:"",md6:""}},[n("v-text-field",{attrs:{box:"",label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[n("contact-add",{on:{update:t.loadContactList}}),t._v(" "),t.selected.length?n("v-btn",{attrs:{loading:t.deleting,color:"red",dark:""},on:{click:t.deleteSelectedContacts}},[t._v("\n                Delete selected\n              ")]):t._e()],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),t.isMobile?t._e():n("v-data-table",{attrs:{loading:t.loading,headers:t.headers,items:t.contacts,search:t.search,"select-all":"","item-key":"contactId",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",[n("td",[n("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:e.selected,callback:function(n){t.$set(e,"selected",n)},expression:"props.selected"}})],1),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.contactId||"-"))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.firstname||"-"))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.lastname||"-"))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.country||"-"))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.mobilePhone||"-"))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.address||"-"))]),t._v(" "),n("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.email||"-"))]),t._v(" "),n("td",{staticClass:"justify-center layout px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.selectContact(e.item.contactId)}}},[n("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.deleteContact(e.item.contactId)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)])]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),t._v(" "),t.isMobile?n("v-container",{attrs:{fluid:"","grid-list-lg":""}},[t.loading?t._e():n("v-data-iterator",{attrs:{"content-tag":"v-layout",row:"",wrap:"",search:t.search,items:t.contacts,"rows-per-page-items":t.rowsPerPageItems,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"item",fn:function(e){return n("v-flex",{attrs:{xs12:"",sm6:"",md3:"",lg3:""}},[n("v-card",[n("v-list",{attrs:{dense:""}},[n("v-list-tile",[n("v-list-tile-content",[t._v("First name:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.item.firstname||"-"))])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Mobile phone:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.item.mobilePhone||"-"))])],1),t._v(" "),n("expantion-panel",[n("v-list-tile",[n("v-list-tile-content",[t._v("Last name:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.item.lastname||"-"))])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Country:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.item.country||"-"))])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Address:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.item.address||"-"))])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Email:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.item.email||"-"))])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Contact ID:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[t._v(t._s(e.item.contactId||"-"))])],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",{attrs:{"align-center":""}},[n("v-checkbox",{attrs:{"hide-details":""},on:{change:t.updateSelection},model:{value:t.checkboxes[e.item.contactId],callback:function(n){t.$set(t.checkboxes,e.item.contactId,n)},expression:"checkboxes[props.item.contactId]"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{disabled:t.deleting,icon:""},on:{click:function(n){t.selectContact(e.item.contactId)}}},[n("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{disabled:t.deleting,icon:""},on:{click:function(n){t.deleteContact(e.item.contactId)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)],1)],1)}}])}),t._v(" "),t.loading?n("v-layout",{staticClass:"pa-2",attrs:{"align-center":"","justify-center":""}},[n("v-progress-circular",{attrs:{size:50,indeterminate:"",color:"primary"}})],1):t._e()],1):t._e()],1),t._v(" "),n("contact-edit",{attrs:{contact:t.contact},on:{close:t.clearContact,update:t.loadContactList}})],1)],1)],1)},staticRenderFns:[]};var U=n("VU/8")(O,j,!1,function(t){n("pYnO")},null,null).exports,D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",{attrs:{"justify-center":""}},[n("v-flex",{staticStyle:{"max-width":"1150px"}},[n("v-jumbotron",{attrs:{height:"500px"}},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-flex",[n("h3",{staticClass:"display-3",attrs:{dark:""}},[t._v("Welcome to the Phone Book app")]),t._v(" "),n("span",{staticClass:"subheading"},[n("p",[n("br"),t._v(" "),n("b",[t._v("Opportunities and functions.")]),t._v(" "),n("br"),t._v("\n                  - Mobile view\n                   "),n("br"),t._v(" "),n("br"),t._v("\n                  - Authorization\n                   "),n("br"),t._v("\n                 - Registration\n                   "),n("br"),t._v("\n                 - Save update sort search contacts.\n                   "),n("br"),t._v("\n                 - And this page is fully adaptable, for different screen sizes.\n")])]),t._v(" "),n("v-divider",{staticClass:"my-3"}),t._v(" "),n("div",{staticClass:"title mb-3"},[t._v("Check more on Github!")]),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{large:"",color:"primary",href:"https://github.com/lMysticl",target:"_blank"}},[t._v("See more\n                ")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var H=n("VU/8")({name:"welcome"},D,!1,function(t){n("FnG/")},"data-v-3073f84d",null).exports,V=n("woOf"),B=n.n(V),N=n("NYxO");a.a.use(N.a);var Y=new N.a.Store({state:{user:{},info:!0,redirect:null,isAuth:!1},getters:{user:function(t){return t.user},infoShowed:function(t){return t.info},isAuth:function(t){return t.isAuth},redirect:function(t){return t.redirect}},mutations:{setUser:function(t,e){return t.user=B()({},e)},setRedirect:function(t,e){t.redirect=e},setAuth:function(t,e){t.isAuth=e},setInfo:function(t,e){t.info=e}},actions:{login:function(t,e){var n,s=t.commit,i=(e.credentials,e.formData),r=e.redirect;return a.a.http.post("https://vuejs-phone-book.herokuapp.com/oauth/token",i,{headers:{authorization:"Basic "+(n="testjwtclientid:XY7kmzoNzl100",btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)})))}}).then(function(t){var e=t.body.access_token;return x.saveToken(e),s("setAuth",!0),r&&G.push(r),!0})},registration:function(t,e){t.commit,e.credentials;var n=e.data,s=e.redirect;return a.a.http.post("https://vuejs-phone-book.herokuapp.com/api/register",n).then(function(t){return s&&G.push(s),!0})},logOut:function(t){var e=t.commit;x.deleteToken(),e("setAuth",!1),G.push("/")}}});a.a.use(g.a);var Z=new g.a({mode:"history",routes:[{path:"/",component:H},{path:"*",redirect:"/"},{path:"/contacts",component:U,meta:{requireAuth:!0}}]});Z.beforeEach(function(t,e,n){var a=t.matched.some(function(t){return t.meta.requireAuth});Y.getters.isAuth;x.isTokenExpired()?(x.deleteToken(),Y.commit("setAuth",!1)):(Y.commit("setAuth",!0),n()),!Y.getters.isAuth&&a?n("/"):n()});var G=Z,W=n("3EgV"),J=n.n(W),K=n("8+8L");n("7zck");a.a.use(J.a),a.a.use(K.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:G,store:Y,components:{App:p},template:"<App/>"})},gKz6:function(t,e){},pYnO:function(t,e){},qSSP:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c72f3725ef62065cf7c6.js.map